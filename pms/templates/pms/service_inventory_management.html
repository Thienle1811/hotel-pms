{% extends 'pms/base.html' %}

{% block title %}{{ page_title }}{% endblock %}

{% block extra_css %}
  .header-actions { margin-bottom: 20px; text-align: right; }
  .actions a, .actions button { color: #007bff; text-decoration: none; margin-right: 10px; border: none; background: none; cursor: pointer; }
  .actions button.delete { color: #dc3545; }
{% endblock %}

{% block content %}
  <h2>{{ page_title }}</h2>

  <div class="header-actions">
    <a href="{% url 'service-item-create' %}" class="btn-action btn-green" style="padding: 10px 15px;">+ Thêm Dịch vụ mới</a>
  </div>

  <table>
    <thead>
      <tr>
        <th>STT</th>
        <th>Tên Dịch vụ/Sản phẩm</th>
        <th>Đơn giá (VND)</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      {% for item in service_items %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td><strong>{{ item.item_name }}</strong></td>
        <td>{{ item.price|floatformat:0 }}</td>
        <td class="actions">
          <a href="{% url 'service-item-edit' item.id %}">Sửa</a>
          <form action="{% url 'service-item-delete' item.id %}" method="POST" style="display: inline;" onsubmit="return confirm('Bạn có chắc muốn xóa dịch vụ này?');">
            {% csrf_token %}
            <button type="submit" class="delete">Xóa</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4">Chưa có danh mục dịch vụ nào được tạo.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}